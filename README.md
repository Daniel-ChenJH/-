# Welcome to Course-Bullying-in-SJTU！

# 使用说明

上海交通大学全自动抢课脚本，支持准点开抢与抢课后持续捡漏两种模式。2021/5/26更新v2.0版本。

这是一个上海交通大学定时自动抢课系统，由Daniel-ChenJH(邮箱:13760280318@163.com)编写，于2021年2月25日首次编辑，2021年5月24日再次修改。

该可执行程序(qiangke.exe文件)目前只能在Windows x86_64电脑上运行，但源代码脚本也可以在mac电脑上运行。该程序基于https://i.sjtu.edu.cn 网站的当前结构编写。 https://i.sjtu.edu.cn  是上海交通大学学生处理个人事务的网站，学生可以在此选择下学期的课程。

本程序支持准点开抢与抢课已经开始后持续捡漏两种模式。但是，您应该只在抢课开放时间段附近时段使用它，否则该程序可能无法工作并抛出错误。

通过使用这个程序，您将能够立即选择您指定的课程。如果您想选择的课程目前已经满员,程序将会持续刷新网站页面,以每秒1到2次的刷新速度检查是否有剩余名额,一旦有空余名额,程序将立即帮您选择这门课。

您不需要手动输入验证码来登录,本程序将为您代劳!

请注意不要经常使用这个程序，因为凭借它您几乎可以在任何时间持续刷新检查所有您想要的课程，您的同学可能会因此而生气。

---

# 声明

作者(@Daniel-ChenJH)对可能使用本程序的潜在用户不承担任何责任。

至少目前学校不会禁止短时间内不断刷新页面的IP或Jaccount，所以您可以放心使用它。

# 使用方法

1. 解压zip文件;
2. 确保您的电脑上有最新版本的Chrome浏览器(90.0.4430系列)。您可以通过访问chrome://settings/help来检查版本。
   本程序将会用到谷歌浏览器自动控制程序chromedriver，属于本程序的必须文件。请将您本机的谷歌浏览器升级至最新版本（90.0.4430系列）。如果您执意要选择其它的chrome版本，可前往http://npm.taobao.org/mirrors/chromedriver/ ，下载对应版本的chromedriver并做替换。
3. 按以下步骤编辑解压文件中的account.txt文件。重要！
4. 在第一行输入您希望本程序的运行模式。本程序支持准点开抢与抢课已经开始后持续捡漏两种模式。在第一行输入1代表使用准点开抢模式，输入2代表使用持续捡漏模式。
5. 若选择持续捡漏模式（2），请将第二行留空；若选择准点开抢模式，请在第二行中写入开抢的时间，格式为'%Y-%m-%d %H:%M:%S'。范例如：2021-5-24 17:35:20 。
6. 将第二行更改为您希望程序检查空余名额的总刷新次数。
   您可以通过设置这个值来保持它的运行，但是记住要给它一个整数。
7. 将第三行更改为您的Jaccount用户名，第四行更改为您的Jaccount密码。
8.

请记住，在下面几行中添加您想要选择的课程!!
每行为一个课程和它的课程类别!（如主修课程，民族生课程，留学生及港澳台生，通识课通选课，交叉课程，任选课程等。）
您可以在此写您想要的课程名称,老师名称或者课程编号，对于每一个您想选的课程您只需写上述三条信息之一。
但是我强烈建议您在这里写下课程编号，这样可以得到最准确的课程信息。
对于模糊课程名如：“高等数学，主修课程“，程序会默认为您刷新系统返回的第一个班级的空余名额。
如果此班级没有空余名额，程序也不会找寻相应课程的其它老师的班级，以免带来不必要的麻烦。
因此如果您想选择特定时间段、特定老师的课程，请您提前查询好相应的课程编号并写在account.txt文件的相应位置。

如果您想在抢选阶段开放时立刻使用本程序，请在海选阶段留个心眼，将您很想选上的课程编号记录下来，以便在海选阶段开始前写入account.txt文件中。

9. 如果您想选择多个班级，只需在下面几行中输入它们和它们的课程类别。
   然而，太多的课程可能会导致程序的效率下降，不建议同时抢四门或以上的课程。
10. 虽然本程序不会退掉您目前所选的课程，但我还是强烈建议您确保您的目标课程预期时间表没有时间冲突。

下面是文件 'account.txt'的一个很好的例子:

12021-5-24 17:35:201000your_jaccount_id_hereyour_jaccount_password_here物理化学，交叉课程(2021-2022-1)-EE234-2，主修课程(2021-2022-1)-MC903-1，通识课

11. 双击'qiangke.exe'启动进程，并耐心等待程序运行。
12. 若程序以任何形式终止，请您先自行登录教学信息服务网，并尝试选课操作。请确保您已经：

（1）您的jaccount信息完全正确！！！
（2） 完成所有上学期评教
（3）您的课程信息输入均正确，这些课程目前都已经可以被选择，且与您目前的时间表没有时间冲突
（4） 您的网络环境良好
在完成上述检查后请尝试再次运行程序。

13.若因为抢课人数过多导致学校教学信息服务网服务器崩溃，本程序也无能为力。因此建议您在运行此程序的同时也自行前往教学信息服务网尝试抢课，以增加成功率。

14.请注意，请不要同时运行多次本程序，这将导致其中只有一个运行窗口能正常运行。

15.非常重要！！！
本exe程序文件由于在cmd中运行，然而Windows10系统的cmd默认开启了“快速编辑模式”，即只要当鼠标点击cmd任何区域时，就自动进入了编辑模式，
之后的程序向控制台输入内容甚至后台的程序都会被阻塞。表现为程序暂停运行或不运行。而此时在控制台里面输入回车或者右键鼠标或者方向键“下”后，
就自动退出了编辑模式。此后，控制又恢复输出内容，服务端又正常了。

因此，在运行本程序且抢课未完成时，若非想退出程序，请不要在任何时候点击程序运行时展现的命令行窗口，会导致程序阻塞！而如果您发现您不小心点了命令行窗口，
窗口内出现了白色选中光标，请及时在窗口中点击鼠标右键即可，程序会恢复正常。

# 程序运行效果

![](image/README/1622171975308.png)

![](image/README/1622171985647.png)

程序的运行状况会被实时更新到log文件：qiangke_log_file.txt中。

![](image/README/1622172020375.png)

# 脚本执行

如果您希望执行程序的源代码脚本qiangke.py，您需要安装Tesseract-OCR软件，具体参考https://cloud.tencent.com/developer/article/1577435 。完成文中内容，添加环境变量后重启电脑便可正常运行。


# 鼓励

如果您觉得Daniel-ChenJH的程序不错，请在Github上点亮“star”以给他一点鼓励。
项目链接：https://github.com/Daniel-ChenJH/Course-Bullying-in-SJTU

祝君好运!

Daniel-ChenJH,
2021.5.24.

# 联系

对于任何使用问题或讨论，请随时联系13760280318@163.com，如果是关于程序运行失败的讨论，请于附件中加上您的使用日志log文件‘qiangke_log_file.txt‘。
